# **Navigation & Routing**

This project uses go\_router for routing, encapsulated within a service-oriented architecture using injectable and get\_it. This structure separates route configuration from navigation logic.

## **1\. Architecture Overview**

The navigation system is built on two core classes:

* **MainRouter (@singleton):**
    * Defines all route path constants (strings).
    * Configures the GoRouter instance and the route tree.
    * Holds the mapping between paths and Screens/Widgets.
* **RouteHelper (@lazySingleton):**
    * The "Controller" for navigation.
    * Exposes semantic methods (e.g., showLogin()) to the UI.
    * Abstracts underlying go\_router logic (pushNamed, replaceNamed, pop).

## **2\. Usage in UI**

To navigate, access the RouteHelper via getIt. Do not use Navigator.of(context) or GoRouter.of(context) directly in your widgets.

### **Basic Navigation**

// Navigate to a new screen  
getIt\<RouteHelper\>().showLoginScreen();

// Navigate and replace the current screen (no back button)  
getIt\<RouteHelper\>().showOnboardingRoot(replace: true);

// Go back  
getIt\<RouteHelper\>().pop();

// Go back with a result  
getIt\<RouteHelper\>().pop(true);

### **Overlays**

For simple overlays (non-route based):

final overlay \= getIt\<RouteHelper\>().showOverlay(MyCustomWidget(), context);

// To remove it later  
getIt\<RouteHelper\>().hideOverlay(overlay);

## **3\. Workflow: Adding a New Route**

Follow these 3 Steps to add a new screen to the application.

### **Step 1: Define the Path Constant**

Open lib/.../navigation/main\_router.dart. Add a static string constant for your new route.

@singleton  
class MainRouter {  
// ... existing constants  
static const String profileScreen \= '/profile'; // \<--- 1\. Add this

// ...  
}

### **Step 2: Register the Route**

In the same MainRouter class, add a GoRoute object to the \_router configuration.

late final GoRouter \_router \= GoRouter(  
routes: \[  
// ... existing routes

    // \<--- 2\. Add the GoRoute definition  
    GoRoute(  
      path: profileScreen,  
      name: profileScreen, // Use the constant for the name  
      builder: (context, state) \=\> const ProfileScreen(),  
    ),  
\],  
);

### **Step 3: Create the Helper Method**

Open lib/.../navigation/route\_helper.dart. Create a semantic method to trigger this route. This ensures type safety and consistency across the app.

@lazySingleton  
class RouteHelper {  
// ... existing methods

// \<--- 3\. Add the helper method  
void showProfileScreen({bool replace \= false}) {  
if (replace) {  
mainRouter.router.replaceNamed(MainRouter.profileScreen);  
} else {  
mainRouter.router.pushNamed(MainRouter.profileScreen);  
}  
}  
}

## **4\. Guidelines & Rules**

* **Naming:** Route constants in MainRouter should match the URL path structure (e.g., /user-details).
* **Named Navigation:** Always use pushNamed or replaceNamed inside RouteHelper to ensure we rely on the stable names defined in MainRouter.
* **Encapsulation:** UI Widgets must strictly use RouteHelper. If you find yourself typing context.go inside a Widget, stop and move that logic to RouteHelper.
* **Dependencies:** Ensure MainRouter is injected into RouteHelper correctly via the constructor/dependency injection system.